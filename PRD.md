
# 产品需求文档 (PRD) - 四象限代办清单 (Eisenhower Matrix To-Do)

**版本**: v1.1.1  
**日期**: 2024-05-24  
**作者**: 志豪  
**状态**: 已投产 (优化迭代中)

---

## 1. 产品概述

### 1.1 产品背景
在信息过载的现代生活中，人们往往面临任务繁重、优先级混乱的问题。基于“艾森豪威尔矩阵”理论，本应用旨在通过直观的四象限分类，帮助用户区分“重要”与“紧急”，从而提升时间管理效率。同时结合极简的玻璃拟态（Glassmorphism）视觉风格与本地化数据存储，提供安全、美观且高效的使用体验。

### 1.2 核心价值
*   **视觉聚焦**：通过颜色和布局强制用户思考任务优先级。
*   **数据安全**：基于 IndexedDB 的纯本地存储，无隐私泄露风险。
*   **心流体验**：流畅的动画、拖拽交互与“闪念”功能，减少操作阻力。
*   **复盘分析**：强大的历史回顾与日历视图，辅助用户进行周期性复盘。

---

## 2. 功能模块详解


### 2.1 首页 (Dashboard)

#### 2.1.1 顶部控制区
*   **Header**：居中显示应用名称，左侧为 Logo，右侧集成功能图标组（主题切换、使用帮助、作者信息、系统设置、同步状态指示灯）。
*   **核心功能按钮（视觉升级）**：
    *   **设计风格**：采用 **圆形 (Rounded-Full)** 悬浮按钮设计，增强点击欲望。
    *   **动态特效**：
        *   **常态**：按钮周围环绕双层旋转边框（顺时针与逆时针交错），配合呼吸光效。
        *   **悬停**：鼠标悬停时，按钮产生缩放交互，光晕增强。
    *   **Tooltip 交互**：
        *   **默认状态**：按钮下方不显示文字标签，保持界面极致简洁。
        *   **悬停状态**：在按钮**上方**弹出带有小三角指示的深色（暗黑模式下为亮色）气泡，显示“新建代办”或“历史回顾”文字，伴随淡入动画。
    *   **左侧按钮**：新建任务（青色系流光）。
    *   **右侧按钮**：历史回顾（紫罗兰色系流光）。
*   **中央输入区**：
    *   **闪念输入框 (Quick Note)**：位于两功能按钮中间，用于快速捕捉灵感。
    *   **中央滚动流**：输入框下方垂直滚动展示历史闪念或预设励志语录，支持鼠标悬停暂停滚动。

#### 2.1.2 四象限视图
*   **布局**：
    *   **Q1 重要且紧急 (红色)**：必须马上做的任务。
    *   **Q2 重要不紧急 (绿色)**：核心任务，需计划时间做。
    *   **Q3 不重要不紧急 (黄色)**：尽量减少或委托。
    *   **Q4 紧急不重要 (蓝色)**：琐事，避免干扰。
*   **交互逻辑**：
    *   **新建**：点击象限空白处或标题栏数字，直接唤起该象限的新建弹窗。
    *   **拖拽**：支持将任务卡片在不同象限间拖拽流转，或在同一象限内调整排序（需开启自定义排序模式）。
    *   **视觉反馈**：拖拽进入某象限时，该象限背景高亮并伴随脉冲光效。

### 2.2 任务管理 (Task Management)

#### 2.2.1 新建/编辑任务
*   **基础信息**：标题、详细描述（自动高度文本域）。
*   **子任务 (Checklist)**：支持添加、删除、完成状态切换，主任务卡片上会显示子任务进度。
*   **日期选择**：
    *   自定义日历组件，集成**农历、节气、节日**显示。
    *   支持月份切换，高亮显示今天和已选日期。
*   **分类标签**：预设6种标签（工作、学习、生活等），选中时高亮显示对应色块。
*   **优先级选择**：大卡片形式选择四象限，提供明确的颜色和文字说明。

#### 2.2.2 任务卡片
*   **显示内容**：标题、标签、日期、进度条。
*   **进度交互**：
    *   **5段式进度条**：点击不同段位直接设置进度（20%, 40%, 60%, 80%, 100%）。
    *   **完成勾选**：点击圆圈或设置进度为100%时，触发完成动画（划线+淡出）。
*   **折叠/展开**：点击箭头展开查看详细描述及子任务列表。

### 2.3 历史回顾 (History System)
*   **列表视图 (List View)**：
    *   **时间导航**：支持按 **日/周/月/年** 维度筛选，并可通过左右箭头切换时间段（如“上一周”）。
    *   **状态筛选**：全部、待办、已完成。
    *   **排序应用**：列表严格遵循系统设置中的排序规则。
*   **日历视图 (Calendar View)**：
    *   **月视图**：网格化展示，显示农历/节气。
    *   **状态红绿点**：日期格底部通过红点（未完成）和绿点（已完成）数量直观展示当日负荷。
    *   **侧栏详情**：点击日期，右侧展示当日所有任务卡片。

### 2.4 系统设置与排序逻辑 (Settings & Logic)

#### 2.4.1 事项排序规则 (Sorting Logic)
用户可在设置中自定义任务在象限内的排列顺序，文案与逻辑必须严格对应：
1.  **自由拖动 (Custom)**：
    *   允许用户手动拖拽排序。
2.  **创建时间 (Created Time)**：
    *   **最早 (Earliest/Asc)**：旧任务排在前面（按创建时间正序）。
    *   **最晚 (Latest/Desc)**：新任务排在前面（按创建时间倒序）。
3.  **完成进度 (Progress)**：
    *   **最低 (Lowest/Asc)**：进度低（0%）的任务排在前面。
    *   **最高 (Highest/Desc)**：进度高（100%）的任务排在前面。

#### 2.4.2 闪念显示模式
*   **滚动展示**：以设定速度垂直滚动（支持速度调节）。
*   **静止展示**：铺满侧边栏，每10秒轮播刷新一次。
*   **隐藏**：隐藏左右两侧的闪念流，专注四象限。

#### 2.4.3 数据管理
*   支持清除所有任务、清除所有闪念或完全格式化数据库（需二次确认）。

---

## 3. 技术架构与规范

### 3.1 技术栈
*   **框架**：React 18+ (Hooks 风格)。
*   **构建工具**：Vite。
*   **样式**：Tailwind CSS (Glassmorphism 玻璃拟态 + Dark Mode)。
*   **动画**：原生 CSS Keyframes (`spin`, `pulse`, `float`, `blob`) + Tailwind Animate。
*   **存储**：IndexedDB (原生 API 封装)，版本号 `v5`。
*   **图标库**：Lucide React。

### 3.2 核心数据结构
*   **Task (任务)**：包含 `id`, `title`, `quadrant`, `progress`, `subtasks`, `tag`, `date`, `createdAt`, `order` 等字段。
*   **QuickNote (闪念)**：包含 `id`, `content`, `createdAt`。

---

## 4. 更新日志 (History)

### [v1.1.1] - 2024-05-24 (本次更新)
*   **交互优化**：主界面“新建”与“历史”按钮回归圆形设计，增加双层旋转边框动画与光晕效果。
*   **视觉减负**：默认隐藏主按钮下方的文字标签，改为鼠标悬停时在按钮上方显示带箭头的 Tooltip。
*   **逻辑修正**：修正排序设置中的文案逻辑。创建时间分为“最早/最晚”，完成进度分为“最低/最高”，确保字面意思与排序结果严格一致。

### [v1.1.0] - 2024-05-24
*   新增历史回顾的时间导航（上一周/下一周等）。
*   新增版本号显示。
*   修复数据备份导出缺失闪念笔记的问题。

### [v1.0.1] - 2024-05-23
*   优化日历组件，增加农历与节气显示。
*   修复编辑弹窗层级问题。
